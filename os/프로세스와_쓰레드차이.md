## 프로세스와 쓰레드의 차이

### 용어 정리

- 프로세스
    - 운영 체제 위에서 실행중인 프로그램
- 프로세서
    - 프로세스가 동작될 수 있도록 하는 하드웨어
- 프로그램
    - 어떤 작업을 위해 운영체제 위해서 실행 할 수 있는 파일
- 실행단위
    - cpu core 에서 실행하는 하나의 단위로 프로세스와 쓰레드를 포괄하는 개념
- 프로세스
    - 하나의 쓰레드만 가지고 있는 단일 쓰레드 프로세스
- 동시성
    - 한 순간에 여러가지 일이 아니라, 짧은 전환으로 여러가지 일을 동시에 처리하는 것처럼 보이는 것

### 멀티 태스킹의 진실

- CPU(프로세서)는 한순간에 하나의 프로세스만 실행할 수 있음
    - 운영체제가 짧은 시간에 수십번 수천번 실행할 프로세스를 교체하고 있기 때문에 우리는 동시에 여러 개의 작업이 실행되고 있다고 느끼는 것!

### PCB(Process Control Block)

- 프로세스를 제어하기 위한 정보 모음

### 프로세스 구조

- Stack
    - 호출된 함수, 지역변수 등 임시 데이터
- Heap
    - 동적으로 생긴 데이터.
        - new Object()
- Data
    - 전역변수
        - static 변수, global 변수
- Code
    - 프로그램의 코드

### 쓰레드 구조
- Code, Data, Heap 영역 공유

### 프로세스
- 프로세서에 의해 동작하고 있는 프로그램
    - 프로세스가 동작 한다는 것은 프로세스의 특정 쓰레드가 실행 중 그 특정 쓰레드는 프로세스가 가진 데이터를 참조함
- 쓰레드 작업 단위를 지원하기 위한 자원 할당의 단위

### 쓰레드
- 프로세스 내에서 실제 작업을 수행
- 모든 프로세스는 최소한 하나의 쓰레드를 가지고 있다
- 프로세스 내에서 실행되는 작업 흐름의 단위
- 싱글 쓰레드 프로세스
    - = 자원 + 쓰레드
- 멀티 쓰레드 프로세스
    - = 자원 + 쓰레드 + 쓰레드 + ... 쓰레드

### 멀티 프로세스의 장단점
- 장점
    - 하나의 프로세스가 잘못 되어도 프로그램은 동작한다
- 단점
    - context switching 비용 발생

### 멀티쓰레드의 장단점
- 대부분의 프로그램이 멀티쓰레드로 작성되어 있다. 그러나, 멀티쓰레드 프로그래밍이 장점만 있는 것은 아니다
    - 장점
        - 시스템 자원을 보다 효율적으로 사용할 수 있다.
        - 사용자에 대한 응답성이 향상된다
        - 작업이 분리되어 코드가 간결해진다
    - 단점
        - 동기화(synchronization)에 주의해야 한다.
        - 교착상태(dead-lock)가 발생하지 않도록 주의해야 한다.
        - 각 쓰레드가 효율적으로 고르게 실행될 수 있게 해야 한다.

> 프로세스 : 쓰레드 = 공장 : 일꾼
> 하나의 새로운 프로세스를 생성하는 것보다 하나의 새로운 쓰레드를 생성하는 것이 더 적은 비용이 든다

### 쓰레드의 구현과 실행

- Thread 클래스를 상속
```
class MyThread extend Thread{
  public void run(){
    /* 작업내용 */
  }
}
```
- Runnable 인터페이스를 구현
```
class MyThread2 implements Runnable{
  public void run(){
    /* 작업내용 */
  }
}
```